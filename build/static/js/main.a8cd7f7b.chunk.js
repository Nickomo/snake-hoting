(this.webpackJsonpsnake_rs_school=this.webpackJsonpsnake_rs_school||[]).push([[0],{13:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),c=n(3),s=n.n(c),a=n(6),i=n(4),u=n(5),l=n(8),d=n(7),h=(n(13),n.p+"static/media/music.1307af46.mp3"),v=n(0),y="up",f="down",j="left",m="right",x=new Audio(h),b=450,p=10,k=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={ctx:null,interval:null,snake:null,currentDirection:m,isFoodExists:!1,currFoodPosX:null,currFoodPosY:null,score:0,isGameOver:!1,sync:!0,muted:!0},e.canvas=o.a.createRef(),e.createFood=function(){var t=Math.floor(Math.random()*b),n=Math.floor(Math.random()*b);t-=t%10,n-=n%10,e.setState({currFoodPosX:t}),e.setState({currFoodPosY:n}),e.setState({isFoodExists:!0})},e.createSnake=function(){return[{x:10,y:250},{x:20,y:250},{x:30,y:250},{x:40,y:250},{x:50,y:250}]},e.handlerKeydown=function(t){var n=e.state,r=n.currentDirection,o=n.sync;switch(t.code){case"KeyW":case"ArrowUp":e.up(r,o);break;case"KeyS":case"ArrowDown":e.down(r,o);break;case"KeyA":case"ArrowLeft":e.left(r,o);break;case"KeyD":case"ArrowRight":e.right(r,o)}e.setState({sync:!1})},e.up=function(t,n){t!==y&&t!==f&&n&&e.setState({currentDirection:y})},e.down=function(t,n){t!==f&&t!==y&&n&&e.setState({currentDirection:f})},e.left=function(t,n){t!==j&&t!==m&&n&&e.setState({currentDirection:j})},e.right=function(t,n){t!==m&&t!==j&&n&&e.setState({currentDirection:m})},e.startGame=function(){var t=e.canvas.current.getContext("2d");document.addEventListener("keydown",e.handlerKeydown);var n=setInterval(e.moveSnake,70);e.setState({interval:n,ctx:t,isGameOver:!1,snake:e.createSnake(),score:0})},e.stopGame=function(){clearInterval(e.state.interval),document.removeEventListener("keydown",e.handlerKeydown),e.setState({isGameOver:!0,currentDirection:m})},e.moveSnake=function(){var t=e.state,n=t.currFoodPosX,r=t.currFoodPosY,o=t.snake,c=t.sync,s=o[o.length-1],i=s.x,u=s.y;c||e.setState({sync:!0}),o.some((function(e,t){return t<o.length-1&&(e.x===i&&e.y===u)}))?e.stopGame():(e.setState((function(e){var t=e.snake,n=e.currentDirection,r=e.currFoodPosX,o=e.currFoodPosY,c=t[t.length-1],s=c.x,i=c.y;n===y?i-=p:n===f?i+=p:n===j?s-=p:n===m&&(s+=p),i>=b?i=0:i<0&&(i=440),s>=b?s=0:s<0&&(s=440);var u=Object(a.a)(t);return u.push({x:s,y:i}),r===s&&o===i||u.shift(),{snake:u}})),n===i&&r===u&&e.setState((function(e){return{isFoodExists:!1,score:e.score+1}})))},e.startMusic=function(){x.play(),x.loop=!0,e.setState({muted:!1})},e.stopMusic=function(){x.pause(),e.setState({muted:!0})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.startGame()}},{key:"componentWillUnmount",value:function(){this.stopGame()}},{key:"render",value:function(){var e=this.state,t=e.ctx,n=e.snake,r=e.isFoodExists,o=e.currFoodPosX,c=e.currFoodPosY,s=e.score,a=e.isGameOver,i=e.muted;t&&(t.clearRect(0,0,b,b),t.fillStyle="rgb(200, 0, 0)",n.map((function(e){t.fillRect(e.x,e.y,p,p)})),r?(t.fillStyle="rgb(2, 200, 200)",t.fillRect(o,c,p,p)):this.createFood());var u=i?Object(v.jsx)("button",{onClick:this.startMusic,children:"Unmute music"}):Object(v.jsx)("button",{onClick:this.stopMusic,children:"Mute music"});return Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)("div",{children:u}),Object(v.jsxs)("div",{className:"container",children:[Object(v.jsxs)("h1",{children:["Score: ",s]}),Object(v.jsx)("canvas",{id:"canvas",height:b,width:b,ref:this.canvas,children:"Hello world!"}),Object(v.jsx)("audio",{id:"audio",src:h,autoPlay:!0,loop:!0,muted:!0}),a?Object(v.jsx)(O,{score:s,retry:this.startGame}):null]})]})}}]),n}(o.a.Component),O=function(e){return Object(v.jsx)("div",{style:{position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.5)",height:"100vh",width:"100vw",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(v.jsxs)("div",{style:{width:"300px",height:"300px",opacity:"0.5",backgroundColor:"white",textAlign:"center"},children:[Object(v.jsx)("h2",{children:"You lose!"}),Object(v.jsxs)("h3",{children:["Score: ",e.score]}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{onClick:e.retry,children:"Retry"})})]})})},S=k;s.a.render(Object(v.jsx)(o.a.StrictMode,{children:Object(v.jsx)(S,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.a8cd7f7b.chunk.js.map